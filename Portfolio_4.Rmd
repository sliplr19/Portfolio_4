---
title: "Portfolio 4"
author: "Lindley Slipetz"
date: "2/26/2021"
output: html_document
---

This is my portfolio piece dedicated to Joey. I figure, what's more romantic than writing a code for someone? To do this project, I asked him to give me any question he's interested in. He settled on "who's the best rapper?". For this project I will be using two datasets. The first dataset tells me the diversity of vocabularies for each rapper. The second dataset gives me information about about the popularity of hip hop artists. I'll be looking at lyrical complexity and popularity as indicators of being the best rapper (which is probably wrong, but I don't really know if there even is a quantitative method to determine the best rapper).

Let's load a package!

```{r load_packages, warning = FALSE}
library(tidyverse)
```

Let's load the data!

```{r load_data}
popularity <- read.csv("data//music.csv", header = TRUE, stringsAsFactors = FALSE)
lyrics <- read.csv("data//music_vocab.csv", header = TRUE, stringsAsFactors = FALSE)
```


Now we need to make a big dataset where the values of the artists from lyrics are joined to the popularity dataset.

```{r inner_join}
all_data <- inner_join(lyrics, popularity, by = c("rapper" = "artist_lastfm"))
```

There's a problem with the popularity dataset: there are multiple artists that have the same name and there's no way to differentiate them. I'm just going to eliminate the ambiguous artists from the dataset.

```{r amb}
all_data <- all_data %>%
  filter(ambiguous_artist == FALSE)
```

There's also some missing data in the lyrics data. Let's get rid of that.

```{r missing_lyr}
all_data <- all_data %>%
  filter(words != "Not enough" & words != "not enough" & nzchar(words) == TRUE)
```

One way we can judge the best rapper is by complexity of lyrics. Let's look at the words variable. We'll start by looking at who has the most and the least diverse vocabulary.

```{r vocab_rank}
all_data %>%
  arrange(desc(words))
```

Busdriver has the most complex lyrics with 7,324 words. Lil baby has the least complex lyrics with 2,762 words. Let's look at the box plot of words by era and the descriptives. As part of the box plot code, I've removed commas from the data: R didn't like that when converting it to numeric. Also, we're going to make the graph Ninja Turtle colored for Joey.

```{r box_lyrics}
all_data[,'words'] <- gsub(",","",all_data[,'words'])
all_data %>%
   ggplot(aes(x=era, y= as.numeric(words), fill=era)) +
   geom_boxplot() +
  scale_y_continuous("Number of words used", breaks = c(1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000), labels = c("1000", "2000", "3000", "4000", "5000", "6000", "7000", "8000")) +
  scale_x_discrete(name ="Era", 
                    limits=c("1980s", "1990s", 
                             "2000s", "2010s")) +
  scale_fill_manual(values=c("red", "#56B4E9", "orange", "purple"))

```

The minimum number of words is least during the 2010s, and the maximum number of words is greatest during the 2000s. Lil baby is from the 2010s and Busdriver is from the 2000s, so this makes sense. The median from the 1980s to the 2000s stayed pretty constant (between 4500 and 5000), but it plummeted in the 2010s (between 3500 and 4000). The interquartile range is greatest for the 2000s (but seemingly not that much greater than the 1990s and the 2010s), and smallest for the 1980s. I think the main take-away from this graph is that hip hop became much less complex during the 2010s. Let's look at descriptives to see if that's supported.

```{r words_des}
tapply(as.numeric(all_data$words), all_data$era, summary)
```
As we saw in the graph, the 2010s have the lowest minimum and the 2000s have the highest maximum. The 1980s and the 2000s have similar means. The 2000s have the highest mean and the 2010s have the lowest mean. So, if you're interested in rappers with complex vocabularies, you should probably listen to something from the 2000s. If you want something simple, then the 2010s is the way to go.

To conclude this section, if having a complex vocabulary is equated with being the best rapper, then Busdriver is the best rapper. He is also from the era of the most complex lyrics, so maybe the 2000s are also the best era for hip hop. Next, we're going to look at popularity as an indicator of being the best.